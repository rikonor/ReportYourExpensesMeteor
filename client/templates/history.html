<template name="History">
  <div class="container">

    <div class="row">
      <div class="col-md-12">
        <h1 id="totalAmount">Expense History - Total is (&#8362; <span id="totalSum">{{totalSum query}}</span>)</h1>
      </div>
    </div>
    
    <div class="row">
      <div class="col-md-12">
        <div class="graph"></div>
      </div>
    </div>
    
    <div class="row">
      <div class="col-md-12">
        <input type="text" class="form-control" name="query" id="query" placeholder="Search" autocomplete="off">
      </div>
    </div>

    <div class="row">
      <div class="col-md-12">
        {{> ExpensesTable query }}
      </div>
    </div>

  </div>
</template>

<template name="ExpensesTable">
  {{#if expenses query}}
  <table class="table" id="expensesTable">
    <thead>
      <tr>
        <th>Date</th>
        <th>Description</th>
        <th>Amount</th>
        <th>Tags</th>
        <th>Edit</th>
      </tr>
    </thead>
    <tbody>
      {{#each expenses query}}
      {{> Expense}}
      {{/each}}
    </tbody>
  </table>
  {{else}}
  <p>No expenses found.</p>
  {{/if}}

  <a id="showLess">Show less</a>
  <a id="showMore">Show more</a>
</template>

<template name="Expense">
  <tr class="expense">
    <td>{{ formatDate effective_at }}</td>
    <td>{{ description }}</td>
    <td>{{ amount }}</td>
    <td>{{#each tags}}{{> Tag}}{{/each}}</td>
    <td><a href="{{pathFor 'expense.edit'}}">Edit</a></td>
  </tr>
</template>

<template name="Tag">
  <a class="tag {{color}}">{{text}}</a>
</template>
