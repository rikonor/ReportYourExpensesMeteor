<template name="History">
  <div class="container">

    <h1 id="totalAmount">Expense History - Total is (&#8362; <span id="totalSum">{{totalSum expenses}}</span>)</h1>
    
    <input type="text" data-role="tagsinput" class="form-control" name="query" id="query" placeholder="Search" autocomplete="off">

    {{#if expenses query}}
    <table class="table" id="expensesTable">
      <thead>
        <tr>
          <th>Date</th>
          <th>Description</th>
          <th>Amount</th>
          <th>Tags</th>
        </tr>
      </thead>
      <tbody>
        {{#each expenses query}}
        {{> Expense}}
        {{/each}}
      </tbody>
    </table>
    {{else}}
    <p>No expenses found.</p>
    {{/if}}
  </div>
</template>

<template name="Expense">
  <tr class="expense">
    <td>{{ formatDate created_at }}</td>
    <td>{{ description }}</td>
    <td>{{ amount }}</td>
    <td>{{#each tags}}{{> Tag}}{{/each}}</td>
  </tr>
</template>

<template name="Tag">
  <a class="tag {{color}}">{{text}}</a>
</template>
